\chapter{BMS Hardware}
\label{cha:hardware}

The need to measure a large amount of voltages and temperatures scattered around the battery pack means that a decentralized structure for the BMS components is preferable. The two main types of logic boards are the \textbf{Mainboard} and the \textbf{Cellboard}.
\begin{figure}[h]
    \centering
    \input{pictures/hierarchy}
    \caption{BMS hierarchy}
    \label{fig:bms_hierarchy}
\end{figure}
Every cellboard measures voltages and temperatures of a \textsl{section} of the pack, and sends data back to the Mainboard via CAN bus. The Mainboard inteprets the received data and takes actions based on them.


\section{Mainboard}
\begin{figure}[h]
    \centering
    \includegraphics[scale=0.5]{pictures/mainboard.jpg}
    \caption{Mainboard PCB}
    \label{fig:mainboard}
\end{figure}
The Mainboard is the central control unit of the BMS. It consists of a microcontroller that handles the pre-charge circuit, two CAN-bus lines and some external peripherals.


\section{Cellboard}
The Cellboards are dedicated to the measurement of module voltages and cell temperatures. The reading of those values is handled by a specialized battery management chip that communicates via SPI to the on-board microcontroller.

